(self.webpackChunkmy_react_app=self.webpackChunkmy_react_app||[]).push([[611],{5172:function(e,t,n){"use strict";n.d(t,{FP:function(){return h},Ou:function(){return m},PG:function(){return g}});var r=n(4165),a=n(1413),s=n(5861),o=n(5063),i=n(9455),c=n(276),l=n(1830),d=n.n(l),u=n(9704),p=n.n(u);function m(e,t,n){var r=(0,i.ad)(o.Z),a=(0,i.hJ)(r,"users"),s={email:e,name:t,pass:n,address:"None",sdt:"None",image:"None",favorites:[]};(0,i.ET)(a,s),window.Email&&window.Email.send({SecureToken:"b085a665-dbbf-4d88-87ac-584318c71ca8",To:e,From:"hanashop5924@gmail.com",Subject:"Create Account Successfully",Body:'\n      <!DOCTYPE html>\n<html lang="en">\n<head>\n  <title></title>\n  <meta charset="UTF-8" />\n  <meta name="viewport" content="width=device-width, initial-scale=1" />\n  <style>\n    .banner img {\n      width: 220px;\n    }\n    .banner {\n      width: max-content;\n      margin: auto;\n    }\n    .container {\n      border: solid 1px darkgray;\n    }\n  </style>\n</head>\n<body>\n  <div className="container">\n    <div className="banner">\n      <img\n        src="https://firebasestorage.googleapis.com/v0/b/my-app-c7d1c.appspot.com/o/users%2Fadmin%40gmail.com?alt=media&token=09ba4815-926c-4477-ba7a-62f54a49e90e"\n        alt=""\n      />\n    </div>\n    <div style="text-align: center">\n      <h3>Hana Shop</h3>\n    </div>\n    <div style="text-align: center">\n      Ch\xfac m\u1eebng '.concat(t," \u0111\xe3 t\u1ea1o t\xe0i kho\u1ea3n th\xe0nh c\xf4ng t\u1ea1i shop!\n      <br />Email: ").concat(e," <br />Password: ").concat(n,"\n    </div>\n  </div>\n</body>\n</html>\n")})}function h(e,t){var n={email:e,pass:t},r=JSON.stringify(n),a=p().AES.encrypt(r,"hanashop5924").toString();localStorage.setItem("access_token",JSON.stringify(a))}function g(){return f.apply(this,arguments)}function f(){return(f=(0,s.Z)((0,r.Z)().mark((function e(){var t,n,s,l,u,m,h,g,f,v,x;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=JSON.parse(localStorage.getItem("access_token")))){e.next=34;break}return"hanashop5924",e.prev=3,n=p().AES.decrypt(t,"hanashop5924"),s=n.toString(p().enc.Utf8),l=JSON.parse(s),u=(0,i.ad)(o.Z),e.next=10,(0,i.PL)((0,i.IO)((0,i.hJ)(u,"users"),(0,i.ar)("email","==",l.email),(0,i.ar)("pass","==",l.pass)));case 10:if(m=e.sent,h=m.docs[0],"None"===(g=h.data()).image){e.next=22;break}return f=(0,c.cF)(o.Z),v=(0,c.iH)(f,"users/".concat(g.image)),e.next=18,(0,c.Jt)(v);case 18:x=e.sent,g=(0,a.Z)((0,a.Z)({},g),{},{image:x}),e.next=23;break;case 22:g=(0,a.Z)((0,a.Z)({},g),{},{image:"/assets/img/images.png"});case 23:return e.abrupt("return",g);case 26:return e.prev=26,e.t0=e.catch(3),d().fire({title:"Login session has expired",text:"Please log in again",icon:"error"}),console.log(e.t0),localStorage.removeItem("access_token"),e.abrupt("return",!1);case 32:e.next=35;break;case 34:return e.abrupt("return",!1);case 35:case"end":return e.stop()}}),e,null,[[3,26]])})))).apply(this,arguments)}},2188:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var r,a=n(1413),s=n(4165),o=n(5861),i=n(9439),c=n(2791),l=n(9085),d=n(1087),u=n(9704),p=n.n(u),m=n(5172),h=n(5063),g={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},f=new Uint8Array(16);function v(){if(!r&&!(r="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(f)}for(var x=[],y=0;y<256;++y)x.push((y+256).toString(16).slice(1));function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(x[e[t+0]]+x[e[t+1]]+x[e[t+2]]+x[e[t+3]]+"-"+x[e[t+4]]+x[e[t+5]]+"-"+x[e[t+6]]+x[e[t+7]]+"-"+x[e[t+8]]+x[e[t+9]]+"-"+x[e[t+10]]+x[e[t+11]]+x[e[t+12]]+x[e[t+13]]+x[e[t+14]]+x[e[t+15]]).toLowerCase()}var k=function(e,t,n){if(g.randomUUID&&!t&&!e)return g.randomUUID();var r=(e=e||{}).random||(e.rng||v)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=r[a];return t}return b(r)},j=n(9455),N=(n(5462),n(7689)),S=n(2426),O=n.n(S),C=n(184);var Z=function(){var e=(0,c.useState)([]),t=(0,i.Z)(e,2),n=t[0],r=t[1],u=(0,c.useState)(!1),g=(0,i.Z)(u,2),f=g[0],v=g[1],x=(0,c.useState)(),y=(0,i.Z)(x,2),b=y[0],S=y[1],Z=(0,c.useState)([]),w=(0,i.Z)(Z,2),I=w[0],A=w[1],P=(0,c.useState)(!0),E=(0,i.Z)(P,2),_=E[0],L=E[1];(0,c.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!JSON.parse(localStorage.getItem("access_token"))){e.next=9;break}return v(!0),e.next=5,(0,m.PG)();case 5:t=e.sent,S(t),e.next=11;break;case 9:v(!1),S();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[v]),(0,c.useEffect)((function(){var e=JSON.parse(localStorage.getItem("cart"));if(e){var t=p().AES.decrypt(e,"hanashop5924").toString(p().enc.Utf8),n=JSON.parse(t);A(n);var i=(0,j.ad)(h.Z),c=(0,j.hJ)(i,"products"),l=n.map(function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var n,r,o;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,j.PL)((0,j.IO)(c,(0,j.ar)("id","==",t.id)));case 2:if((n=e.sent).empty){e.next=7;break}return r=n.docs[0],o=r.data(),e.abrupt("return",(0,a.Z)((0,a.Z)({},o),{},{quantity:t.quantity}));case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());Promise.all(l).then((function(e){var t=e.filter((function(e){return null!==e}));r(t),L(!1)}))}}),[]);var U,B=function(){return n.reduce((function(e,t){return e+t.quantity*t.price}),0)},J=(0,N.s0)(),T=function(){var e=(0,o.Z)((0,s.Z)().mark((function e(t){var n,r,a,o,i,c,d,u,p,m,g,v,x,y,N,S,C,Z,w,A,P,E,_;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=O()(),r=n.format("DD/MM/YYYY HH:mm:ss"),a=l.Am.loading("\u0110ang x\u1eed l\xed..."),o=document.getElementById("name").value,i=document.getElementById("sdt").value,c=document.getElementById("address").value,d="",u="",p="",m=/[0-9]*/,g=/^(0?)(3[2-9]|5[6|8|9]|7[0|6-9]|8[0-6|8|9]|9[0-4|6-9])[0-9]{7}$/,v=/^[\w-]+@([\w-]+\.)+[\w-]{2,4}$/,""===o?d="T\xean kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng":m.test(o)||(d="T\xean kh\xf4ng h\u1ee3p l\u1ec7"),""===i?u="S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng":g.test(i)||(u="S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng h\u1ee3p l\u1ec7"),""===c&&(p="\u0110\u1ecba ch\u1ec9 kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng"),!0!==f||!b){e.next=49;break}if(""!==d||""!==p||""!==u){e.next=43;break}return l.Am.update(a,{render:"X\u1eed l\xed th\xe0nh c\xf4ng",type:"success",isLoading:!1,autoClose:1e3,closeOnClick:!0}),x=(0,j.ad)(h.Z),y=(0,j.hJ)(x,"orders"),N=k(),e.next=24,(0,j.PL)((0,j.IO)(y,(0,j.ar)("id","==",N)));case 24:S=e.sent,C=S.docs.length>0,Z=N;case 27:if(!C){e.next=35;break}return Z=k(),e.next=31,(0,j.PL)((0,j.IO)(y,(0,j.ar)("id","==",Z)));case 31:w=e.sent,C=w.docs.length>0,e.next=27;break;case 35:A=B(),P={id:Z,email:b.email,name:o,sdt:i,address:c,cart:I,total:A,time:r,status:"Pending"},(0,j.ET)(y,P),l.Am.update(a,{render:"\u0110\u1eb7t h\xe0ng th\xe0nh c\xf4ng",type:"success",isLoading:!1,autoClose:1e3,closeOnClick:!0}),setTimeout((function(){return J("/")}),1e3),localStorage.removeItem("cart"),e.next=47;break;case 43:""!==d&&(0,l.Am)(d,{type:"error",position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,theme:"light"}),""!==p&&(0,l.Am)(p,{type:"error",autoClose:2e3,position:"top-right",hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,theme:"light"}),""!==u&&(0,l.Am)(u,{type:"error",autoClose:2e3,position:"top-right",hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,theme:"light"}),l.Am.update(a,{render:"X\u1eed l\xed th\xe0nh c\xf4ng",type:"success",isLoading:!1,autoClose:1e3,closeOnClick:!0});case 47:e.next=53;break;case 49:E=document.getElementById("email").value,_="",""===E?_="Email kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng":v.test(E)||(_="Email kh\xf4ng h\u1ee3p l\u1ec7"),""===d&&""===_&&""===p&&""===u?(l.Am.update(a,{render:"X\u1eed l\xed th\xe0nh c\xf4ng",type:"success",isLoading:!1,autoClose:1e3,closeOnClick:!0}),l.Am.update(a,{render:"\u0110\u1eb7t h\xe0ng th\xe0nh c\xf4ng",type:"success",isLoading:!1,autoClose:1e3,closeOnClick:!0}),setTimeout((function(){return J("/")}),1e3),localStorage.removeItem("cart")):(""!==d&&(0,l.Am)(d,{type:"error",position:"top-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,theme:"light"}),""!==_&&(0,l.Am)(_,{type:"error",autoClose:2e3,position:"top-right",hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,theme:"light"}),""!==p&&(0,l.Am)(p,{type:"error",autoClose:2e3,position:"top-right",hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,theme:"light"}),""!==u&&(0,l.Am)(u,{type:"error",autoClose:2e3,position:"top-right",hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,theme:"light"}),l.Am.update(a,{render:"X\u1eed l\xed th\xe0nh c\xf4ng",type:"success",isLoading:!1,autoClose:1e3,closeOnClick:!0}));case 53:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return!0===_?(0,C.jsx)("div",{className:"d-flex justify-content-center mt-3",children:(0,C.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,C.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):(0,C.jsx)("section",{className:"checkout_area section_gap",children:n.length>0?(0,C.jsx)("div",{className:"container",children:(0,C.jsx)("div",{className:"billing_details",children:(0,C.jsxs)("div",{className:"row",children:[(0,C.jsxs)("div",{className:"col-lg-8",children:[(0,C.jsx)("h3",{children:"Billing Details"}),(0,C.jsxs)("form",{className:"row contact_form",onSubmit:function(e){return T(e)},children:[(0,C.jsxs)("div",{className:"col-md-6 form-group p_star",children:[(0,C.jsx)("input",{type:"text",className:"form-control",id:"name",name:"name",placeholder:"Full name"}),(0,C.jsx)("span",{})]}),(0,C.jsxs)("div",{className:"col-md-6 form-group p_star",children:[(0,C.jsx)("input",{type:"text",className:"form-control",id:"sdt",name:"number",placeholder:"Phone number"}),(0,C.jsx)("span",{})]}),!0!==f?(0,C.jsxs)("div",{className:"col-md-12 form-group p_star",children:[(0,C.jsx)("input",{type:"text",className:"form-control",id:"email",name:"add1",placeholder:"Email"}),(0,C.jsx)("span",{})]}):null,(0,C.jsx)("div",{className:"col-md-12 form-group p_star",children:(0,C.jsx)("input",{type:"text",className:"form-control",id:"address",name:"city",placeholder:"Address"})}),(0,C.jsx)("button",{className:"btn-primary",type:"submit",children:"Update Shipping"})]})]}),(0,C.jsx)("div",{className:"col-lg-4",children:(0,C.jsxs)("div",{className:"order_box",children:[(0,C.jsx)("h2",{children:"Your Order"}),(0,C.jsxs)("ul",{className:"list",children:[(0,C.jsx)("li",{children:"Product:"}),(0,C.jsx)("li",{children:(0,C.jsx)("ul",{children:n.map((function(e){return(0,C.jsxs)("li",{children:[(0,C.jsxs)("span",{style:{float:"left"},children:[e.name,(0,C.jsxs)("span",{className:"middle",style:{margin:0,width:"30px"},children:["\xa0x",e.quantity]})]}),(0,C.jsx)("br",{})]},e.id)}))})})]}),(0,C.jsx)("ul",{className:"list list_2",children:(0,C.jsxs)("li",{children:["Total ",(0,C.jsx)("span",{children:(U=B()+4e4,U.toLocaleString("vi",{style:"currency",currency:"VND"}))})]})})]})})]})})}):(0,C.jsx)("div",{className:"text-center no-cart",children:(0,C.jsxs)("div",{className:"container",children:[(0,C.jsx)("h3",{children:"Kh\xf4ng c\xf3 g\xec trong cart"}),(0,C.jsx)(d.rU,{to:"/shop",children:(0,C.jsx)("button",{type:"",children:"Tr\u1edf l\u1ea1i shop "})})]})})})}},5063:function(e,t,n){"use strict";var r=(0,n(4702).ZF)({apiKey:"AIzaSyB3J50OmzdKaImIIhiXjArAFbsupexbqLc",authDomain:"my-app-c7d1c.firebaseapp.com",projectId:"my-app-c7d1c",storageBucket:"my-app-c7d1c.appspot.com",messagingSenderId:"226950561739",appId:"1:226950561739:web:fcd829cb3c9e4d0203004e",measurementId:"G-W9F7LZZQNT"});t.Z=r},2480:function(){}}]);
//# sourceMappingURL=611.1c7013ee.chunk.js.map